<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ajax Pages | Framework7 Documentation</title>
    <meta property="og:image" content="../i/f7-banner.jpg">
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/highlight.css">
    <link rel="shortcut icon" href="../favicon.png">
    <script src="../js/vendor/modernizr-2.7.1.min.js"></script>
  </head>
  <body>
    <header class="inner-header">
      <div class="center"><a href="../" class="logo"></a>
        <div class="langs"><span>语言: </span><a href="http://www.idangero.us/framework7/">英文</a><a href="http://framework7.taobao.org">中文</a></div>
        <div class="title-links">
          <div class="title">Framework7</div>
          <div class="links-row">
            <div class="links-label">项目:</div>
            <div class="links"><a href="https://github.com/nolimits4web/Framework7" target="_blank">下载</a><a href="../contribute/">贡献</a><a href="../donate/">捐助</a><a href="https://github.com/nolimits4web/Framework7/blob/master/CHANGELOG.md" target="_blank">更新日志</a>
            </div>
          </div>
          <div class="links-row">
            <div class="links-label">学习:</div>
            <div class="links"><a href="../get-started/">开始使用</a><a href="../docs/" class="active">文档</a><a href="../tutorials/">教程</a><a href="https://muut.com/framework7-cn/#!/" target="_blank">中文论坛</a>
            </div>
          </div>
          <div class="links-row">
            <div class="links-label">应用:</div>
            <div class="links"><a href="../examples/">案例</a><a href="../plugins/">插件</a><a href="../apps/">示例</a><a href="../showcase/">应用</a>
            </div>
          </div>
          <div class="links-row">
            <p class="f7-plus">想用F7但是碰到了安卓兼容性问题？试试 <a href='https://github.com/sdc-fe/Framework7-Plus'>F7-Plus</a></p>
            <p class="f7-plus">或者可以试试基于F7开发的，轻量且兼容所有主流安卓设备的 <a href='http://m.sui.taobao.org/components/'>MSUI</a></p>
          </div>
        </div>
      </div>
    </header>
    <div class="share-line">
      <div class="center">
        <div class="share">
          <div class="bdsharebuttonbox">
            <a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
            
            <div class='qq-group'> Framework7 交流QQ群： 234298849</div>
          </div>
        </div>
        <div class="flattr-button"><a target="_blank" href="https://flattr.com/submit/auto?user_id=nolimits4web&amp;url=http://www.idangero.us/framework7/&amp;title=Framework7&amp;description=Full%20Featured%20HTML%20Framework%20For%20Building%20iOS%20Apps&amp;language=en_GB&amp;tags=api,programming,mobile,framework&amp;category=software"><img src="../i/flattr-badge-large.png"></a></div>
        <div class="github-buttons">
          <a class="github-btn" src="http://ghbtns.com/github-btn.html?user=nolimits4web&repo=framework7&type=watch&count=true" width="100" height="20"> Star </a>
          <a class="github-btn" src="http://ghbtns.com/github-btn.html?user=nolimits4web&repo=framework7&type=fork&count=true" width="100" height="20"> Fork </a></div>
        <div class="clearfix"></div>
      </div>
    </div>
    <div class="content center">
      <div class="docs-wrap">
        <div class="docs-nav">
          <ul>
            <li class="title">核心库</li>
            <li><a href="dom.html">自定义DOM库(Dom7)</a></li>
            <li><a href="app-layout.html">APP基本HTML结构</a></li>
            <li><a href="rtl-layout.html">从右向左布局</a></li>
            <li><a href="init-app.html">初始化应用</a></li>
            <li><a href="views.html">视图(Views)</a></li>
            <li><a href="pages.html">页面(Pages)</a></li>
            <li><a href="page-callbacks.html">页面回调</a></li>
            <li class="title">路由器(router)</li>
            <li><a href="router-api.html">API</a></li>
            <li><a href="pages-ajax.html">Ajax 页面</a></li>
            <li><a href="pages-dynamic.html">动态页面</a></li>
            <li><a href="pages-inline.html">内联页面(DOM缓存)</a></li>
            <li><a href="linking-views.html">视图间链接</a></li>
            <li class="title">组件</li>
            <li>导航栏和工具栏
              <ul>
                <li><a href="navbar-toolbar-layouts.html">布局类型</a></li>
                <li><a href="navbar.html">导航栏(navbar)</a></li>
                <li><a href="dynamic-navbar.html">动态导航栏</a></li>
                <li><a href="sub-navbar.html">二级导航栏</a></li>
                <li><a href="toolbar.html">工具栏(toolbar)</a></li>
                <li><a href="tabbar.html">带图标工具栏</a></li>
                <li><a href="hide-bars-on-scroll.html">自动隐藏工具栏</a></li>
              </ul>
            </li>
            <li><a href="searchbar.html">搜索栏(searchbar)</a></li>
            <li><a href="status-bar.html">状态栏(statusbar)</a></li>
            <li><a href="side-panels.html">侧栏 </a></li>
            <li><a href="content-block.html">内容区</a></li>
            <li><a href="grid.html">栅格(grid)</a></li>
            <li>弹层
              <ul>
                <li><a href="modal.html">模态框(Modal)</a></li>
                <li><a href="popup.html">弹出窗(Popup)</a></li>
                <li><a href="popover.html">弹出框(popover)</a></li>
                <li><a href="action-sheet.html">操作表(Action Sheet)</a></li>
                <li><a href="login-screen.html">登陆屏(Login Screen)</a></li>
                <li><a href="picker-modal.html">选择框(Picker Modal)</a></li>
              </ul>
            </li>
            <li><a href="preloader.html">加载指示符(Preloader Indicator)</a></li>
            <li>列表(表格)
              <ul>
                <li><a href="list-view.html">列表(list)</a></li>
                <li><a href="contacts-list.html">联系人列表</a></li>
                <li><a href="media-list-view.html">多媒体列表</a></li>
                <li><a href="swipeout.html">滑动操作(swipeout)</a></li>
                <li><a href="sortable-list.html">可排序列表</a></li>
                <li><a href="virtual-list.html">虚拟列表</a></li>
              </ul>
            </li>
            <li><a href="accordion.html">手风琴布局(Accordion / Collapsible)</a></li>
            <li><a href="cards.html">卡片(cards)</a></li>
            <li><a href="buttons.html">按钮(buttons)</a></li>
            <li><a href="floating-action-button.html">浮动操作按钮</a></li>
            <li>表单(form)
              <ul>
                <li><a href="form-elements.html">表单布局</a></li>
                <li><a href="checkboxes-radios.html">单选复选按钮</a></li>
                <li><a href="smart-select.html">Smart Select</a></li>
                <li><a href="disabled-elements.html">禁用元素</a></li>
                <li><a href="form-data.html">表单数据</a></li>
                <li><a href="form-storage.html">表单数据存储</a></li>
                <li><a href="form-ajax-submit.html">Ajax异步提交</a></li>
              </ul>
            </li>
            <li><a href="tabs.html">标签页(tabs)</a></li>
            <li><a href="swiper.html">幻灯片(swiper)</a></li>
            <li><a href="photo-browser.html">图片浏览器</a></li>
            <li><a href="picker.html">选择器(picker)</a></li>
            <li><a href="calendar.html">日历(calendar)</a></li>
            <li><a href="pull-to-refresh.html">下拉刷新</a></li>
            <li><a href="infinite-scroll.html">无限滚动</a></li>
            <li><a href="messages.html">消息(message)</a></li>
            <li><a href="messagebar.html">消息栏</a></li>
            <li><a href="notifications.html">通知(notification)</a></li>
            <li><a href="lazy-load.html">懒加载</a></li>
            <li class="title">样式</li>
            <li><a href="color-themes.html">皮肤颜色</a></li>
            <li><a href="hairlines.html">边框</a></li>
            <li class="title">Template7</li>
            <li><a href="template7.html">入门</a></li>
            <li><a href="template7-auto-compilation.html">自动编译模板</a></li>
            <li><a href="template7-pages.html">Pages页面</a></li>
            <li class="title">Fast Clicks</li>
            <li> <a href="active-state.html">激活状态</a></li>
            <li> <a href="tap-hold.html">长按事件</a></li>
            <li> <a href="touch-ripple.html">点击水波效果(Material)</a></li>
            <li class="title">工具</li>
            <li> <a href="device-api.html">设备 API</a></li>
            <li> <a href="support-api.html">API</a></li>
            <li class="title"><a href="plugins-api.html">插件 API</a></li>
            <li class="title"><a href="custom-build.html">自定义下载 </a></li>
          </ul><a href="#" class="toggle-docs-nav"><span></span></a>
        </div>
        <div class="docs-content">
          <h1>Ajax Page</h1>
          <p>我们有了一个有View和Page的应用结构，现在我们需要理解如何创建新的Page，以及Framework7是如何加载他们的。</p>
          <p>下面有两个重要的地方请注意：</p>
          <div class="important-note">
            p <b>默认情况下 Framework7 会使用 Ajax 加载所有的页面</b>，除了带有 <b>external</b> class的链接（<b>&lt;a href="somepage.html" class="external"></b>）和没有正确 <b>href</b> 值的链接（比如是空的或者是 <b>#</b>）。
            p 在 <a href="init-app.html">初始化</a> 时候传递不同的 <b>ajaxLinks</b> 参数可以改变这个行为。
          </div>
          <p>所以我们如果需要创建一个链接指向 <code>about.html</code>，我们只需要按照平时一样写 <code>&lt;a&gt;</code>标签就可以：</p>
          <pre><code>&lt;a href="about.html"&gt;Go to About page&lt;/a&gt;</code></pre>
          <p>当我们点击这个链接的时候，Framework7会通过Ajax获取 <code>about.html</code>，解析它的内容，然后把它插入到DOM中，并且做一个动画切换到这个新页面。</p>
          <h2>Page 内部的结构</h2>
          <p>因为Framework7有一个非常聪明的解析器，所以在内部页面中我们不需要完整的HTML结构（head,body,views,pages等)。比如 <code>about.html</code> 的内容：</p>
          <pre><code>&lt;-- That is all we have in about.html file --&gt;
&lt;div class="page" data-page="about"&gt;
... About page content goes here
&lt;/div&gt;</code></pre>
          <p>重点是，Framework7 解析器会尝试在ajax加载的页面中寻找 <code>&lt;div class="page"&gt;</code>，所以我们不需要完整的HTML结构。当然这不是强制的，你可以写出完整的页面结构。</p>
          <h2>多个Page的结构</h2>
          <p>下面有一个复杂一点的情况。比如，我们有两个 <a href="views.html">初始化的View</a>。在我们的index文件中：</p>
          <pre><code>&lt;body&gt;
  ...
  &lt;!-- Views --&gt;
  &lt;div class="views"&gt;
    &lt;!-- Left view --&gt;
    &lt;div class="view view-main left-view"&gt;
      &lt;!-- Navbar--&gt;
      &lt;!-- Pages --&gt;
        &lt;a href="about.html"&gt; About &lt;/a&gt;
      &lt;!-- Toolbar--&gt;
    &lt;/div&gt;
    &lt;!-- Right view --&gt;
    &lt;div class="view right-view"&gt;
      &lt;!-- Navbar--&gt;
      &lt;!-- Pages --&gt;
        &lt;a href="about.html"&gt; About &lt;/a&gt;
      &lt;!-- Toolbar--&gt;
    &lt;/div&gt;          
  &lt;/div&gt;
  ...
&lt;/body&gt;</code></pre>
          <p>如上例所示，我们有两个View，并且她们都有一个链接指向 <code>about.html</code>。并且，我们希望在不同的 View 中跳转到 <code>about.html</code> 页面时显示的是不同的内容。</p>
          <p>我们看看这种情况下 <code>about.html</code> 应该是什么样的：</p>
          <pre><code>&lt;!-- Left view --&gt;
&lt;div class="view view-main left-view"&gt;
  &lt;div class="page" data-page="about-right"&gt;
    ... This page will be loaded when you click about.html link from Left view ...
  &lt;/div&gt;          
&lt;/div&gt;
&lt;!-- Right view --&gt;
&lt;div class="view right-view"&gt;
  &lt;div class="page" data-page="about-right"&gt;
    ... This page will be loaded when you click about.html link from Right view ...
  &lt;/div&gt;          
&lt;/div&gt;</code></pre>
          <p>最关键的地方是，在 <code>about.html</code> 中的两个view应该和主页中的view有相同的class。这样Framework7就知道应该哪一个page应该放在哪一个view中。</p>
          <h2>动态导航栏的文件结构</h2>
          <p>在<a href="navbar-toolbar-layouts.html">导航栏和工具栏布局类型</a>中，你会看到动态导航栏需要 through-type 布局。但是这种布局类型的工具栏不在Page中，所以我们需要放在放在 <code>about.html</code> 中的正确位置：</p>
          <pre><code>&lt;!-- Left view --&gt;
&lt;div class="view view-main left-view"&gt;
  &lt;div class="page" data-page="about-right"&gt;
    ... This page will be loaded when you click about.html link from Left view ...
  &lt;/div&gt;          
&lt;/div&gt;
&lt;!-- Right view --&gt;
&lt;div class="view right-view"&gt;
  &lt;div class="page" data-page="about-right"&gt;
    ... This page will be loaded when you click about.html link from Right view ...
  &lt;/div&gt;          
&lt;/div&gt; </code></pre>
          <p>The main point here is that page for speific View should be wrapped with <code>&lt;div class="view"&gt;</code> with the same classes as in main layout. It will help Framework7 to recognize which page is for which view.</p>
          <h2>Internal file structure with Dynamic Navbar</h2>
          <p class="ios-only">Such structure is supported only in iOS Theme</p>
          <p>As you may see in <a href="navbar-toolbar-layouts.html">Nabvar & Toolbar layout types</a> dynamic navbar requires through-type layout. But in this layout type navbar is not inside of page. So here is where we need to put it in <code>about.html</code> file:</p>
          <pre><code>&lt;div class="navbar"&gt;
  ... Navbar content goes here
&lt;/div&gt;
 
&lt;div class="page" data-page="about"&gt;
  ... About page content goes here
&lt;/div&gt;</code></pre>
          <p>The point is that we just need to put navbar with is content near with page. And if you need to have here fiew pages with different navbars, just wrap them both (page and navbar) with appropriate views like in previous example.</p>
          <h2>Going back in navigation</h2>
          <p>Ok, we already know how to load pages, but how can we get back to the previous page with reverse transition.</p>
          <p>It is actually super easy, all we need is just to add <b>back</b> class to link. Here is the structure of <code>about.html</code> page with back link to home <code>index.html</code> page:</p>
          <pre><code>&lt;div class="page" data-page="about"&gt;
  &lt;!-- Just add additional "back" class to link --&gt;
  &lt;a href="index.html" class="back"&gt; Go back to home page &lt;/a&gt;
&lt;/div&gt;</code></pre>
          <p>关于后退链接几个需要注意的地方：</p>
          <div class="important-note">
            <ul>
              <li>
                <p>如果在浏览历史中有页面，Framework7会忽略掉 <b>href</b> 属性中的值。</p>
              </li>
              <li>
                <p>如果在浏览历史中没有页面（比如你在首页点了后退），Framework7 会加载 href 属性指定的url。</p>
                <p>你无法改变上述行为。</p>
              </li>
            </ul>
          </div>
          <p>对后退链接来说， <code>href</code> 属性不是必须得，但是为了向下兼容，最好还是写上。</p>
          <h2>滑动后退</h2>
          <p class="ios-only">This feature is available only in iOS Theme</p>
          <p>如果你启用了 "swipeBackPage" <a href="init-app.html">应用参数</a>，那么你可以通过从左向右滑动来后退到上一个页面。但是有时候你会想在某些页面中禁用这个行为，这种情况下你只需要加一个 <b>no-swipeback</b> class 即可。</p>
          <pre><code>&lt;div class="page no-swipeback"&gt;
    ...
&lt;/div&gt;</code></pre>
          <h2>取消/增加页面切换动画</h2>
          <p>有时候你在加载页面或者后退的时候需要立刻执行，不想要一个切换的动画效果，可以通过增加一个 "no-animation" class 在链接上即可。</p>
          <pre><code>&lt;div class="page" data-page="about"&gt;
  &lt;-- Add additional "no-anmation" class to link to diable animated page transition --&gt;
  &lt;a href="about.html" class="no-animation"&gt; Load About page immediately &lt;/a&gt;
  
  &lt;-- The same rule for back link --&gt;
  &lt;a href="index.html" class="back no-animation"&gt; Go back immediately &lt;/a&gt;
&lt;/div&gt;</code></pre>
          <p>如果我们已经全局禁用了动画，但是在某些链接上希望启用这些动画，那么我们可以给链接加上 "with-animation" class。</p>
          <pre><code>&lt;div class="page" data-page="about"&gt;
  &lt;!-- Add additional "with-anmation" class to link to enable animated page transition --&gt;
  &lt;a href="about.html" class="with-animation"&gt; Load About page with animation &lt;/a&gt;
 
  &lt;!-- The same rule for back link --&gt;
  &lt;a href="index.html" class="back with-animation"&gt; Go back with animation &lt;/a&gt;
&lt;/div&gt;</code></pre>
          <h2>通过 data 标签配置更多选项</h2>
          <p>有时候我们希望在某些链接上有更多的配置，我们可以使用作为 <code>data-</code>属性来配置所有在<a href="views.html#view-navigation-methods"> 视图链接方法</a>中的参数，比如：</p>
          <pre><code>&lt;!-- Refresh currently active page (reload from server) --&gt;
&lt;a href="about.html" data-reload="true" data-ignore-cache="true"&gt;Refresh page&lt;/a&gt;
 
&lt;!-- Go back but to another page, not to actual previous page in history. Such method also allows to jump back in history: --&gt;
&lt;a href="about.html" class="back" data-force="true"&gt;Back to About&lt;/a&gt;
 
&lt;!-- Load new page without animation --&gt;
&lt;a href="about.html" data-animate-pages="false"&gt;&lt;/a&gt;          </code></pre>
          <div class="important-note">
            <p>Note that such attributes should be used in hypens-case instead of camelCase: </p>
            <ul>
              <li>animatePages - data-animate-pages</li>
              <li>ignoreCache - data-ignore-cache</li>
              <li>animatePages - data-animate-pages</li>
              <li>contextName - data-context-name</li>
              <li>reloadPrevious - data-reload-previous</li>
            </ul>
          </div>
          <h2>Load pages using JavaScript</h2>
          <p>It is possible to load page from HTML files using JavaScript API, not only using <code>&lt;a&gt;</code> tags. For this case we may use <code>.router.loadPage(url)</code> <a href="router-api.html#view-navigation-methods">View Navigation Methods</a>:</p>
          <pre><code>// Initialize App  
var myApp = new Framework7();
        
// Initialize View          
var mainView = myApp.addView('.view-main')          
        
// Load page from about.html file to main View:
mainView.router.loadPage('about.html');</code></pre>
          <p>Note, that it is only possible for Views that were initialized</p>
          <h2>Going back using JavaScript</h2>
          <p>You can also get the same as when you click "back" link but with JavaScript using <code>.router.back()</code> <a href="router-api.html#view-navigation-methods">View Navigation Methods</a>:</p>
          <pre><code>// Initialize App  
var myApp = new Framework7();
        
// Initialize View          
var mainView = myApp.addView('.view-main')          
        
// Go back on main View
mainView.router.back();</code></pre>
          <p>前提是View必须已经初始化完成。</p>
          <h2>结论</h2>
          <p>Framework7 中，页面之间的链接和路由都是很简单的，你只需要记住：</p>
          <ul>
            <li>
              <p>你需要使用普通的 <code>&lt;a&gt;</code> 标签，她有一个href属性指向你需要加载的页面。</p>
            </li>
            <li>
              <p>通过ajax加载的页面不需要有完整的HTML结构。只需要有 <b>&lt;div class="page"&gt;</b> (和 <b>&lt;div class="navbar"&gt;</b> 如果你需要动态的滚动条)</p>
            </li>
            <li>
              <p>如果你在同一个文件中有多个Page，把他们用 <b>&lt;div class="view"&gt;</b> 包裹起来，并且给每一个View设置好正确的class。</p>
            </li>
            <li>
              <p>只需给一个链接加上 back class (<b>&lt;a href="index.html" class="back"&gt;</b>)，她就会自动变成一个后退链接。</p>
            </li>
          </ul>
          <h2>下一步</h2>
          <p>让我们看看如果做 <a href="linking-views.html">View 间的链接</a></p>
        </div>
      </div>
    </div>
    <div class="share-line">
      <div class="center">
        <div class="share">
          <div class="bdsharebuttonbox">
            <a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
            
            <div class='qq-group'> Framework7 交流QQ群： 234298849</div>
          </div>
        </div>
        <div class="flattr-button"><a target="_blank" href="https://flattr.com/submit/auto?user_id=nolimits4web&amp;url=http://www.idangero.us/framework7/&amp;title=Framework7&amp;description=Full%20Featured%20HTML%20Framework%20For%20Building%20iOS%20Apps&amp;language=en_GB&amp;tags=api,programming,mobile,framework&amp;category=software"><img src="../i/flattr-badge-large.png"></a></div>
        <div class="github-buttons">
          <a class="github-btn" src="http://ghbtns.com/github-btn.html?user=nolimits4web&repo=framework7&type=watch&count=true" width="100" height="20"> Star </a>
          <a class="github-btn" src="http://ghbtns.com/github-btn.html?user=nolimits4web&repo=framework7&type=fork&count=true" width="100" height="20"> Fork </a></div>
        <div class="clearfix"></div>
      </div>
    </div>
    <footer>
      <div class="center">
        <div class="links"><a href="./">Framework7</a><a href="../plugins/">插件</a><a href="./contribute/">贡献</a><a href="./get-started/">开始使用</a><a href="./docs/">文档</a><a href="./tutorials/">教程</a><a href="./forum/">论坛</a><a href="./examples/">案例</a><a href="./apps/">示例</a><a href="./showcase/">应用</a></div>
        <div class="copy">2015 © Framework7 by iDangero.us</div>
        <div class="copy">翻译 by SDC-ALIBABA <a href='mailto:hongxun.lhx@alibaba-inc.com'>联系我们</a></div>
      </div>
    </footer>
    <script src="../js/vendor/jquery-1.11.0.min.js"></script>
    <script src="../js/plugins.js"></script>
    <script src="../js/main.js"></script>
  </body>
</html>